<!-- TODO: Actual homepage -->
<h1>Settings</h1>
@if (hasLoaded) {
<mat-card class="form-card">
  <mat-card-header>
    <mat-card-title>
      Change Profile
    </mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="profileForm" (ngSubmit)="updateProfile()">

      <mat-form-field appearance="outline">
        <mat-label>Username</mat-label>
        <input matInput type="text" formControlName="username">
        @if (profileForm.controls.username.errors) {
        <mat-error>{{profileForm.controls.username.errors | validationError:"Only A-Z,0-9,and _ allowed"}}</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input matInput type="text" formControlName="name">
        @if (profileForm.controls.name.errors) {
        <mat-error>{{profileForm.controls.name.errors | validationError}}</mat-error>
        }
      </mat-form-field>

      <mat-card-actions>
        <button mat-button type="submit" [disabled]="!profileForm.enabled || !profileForm.valid || !profileForm.dirty">
          Update Profile
        </button>
      </mat-card-actions>

    </form>
  </mat-card-content>
</mat-card>

<mat-divider class="divider"></mat-divider>

<!-- email change form -->
<mat-card class="form-card">
  <mat-card-header>
    <mat-card-title>
      Change Email
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="emailForm" (ngSubmit)="updateEmail()">
      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input matInput type="text" formControlName="email">
        @if (emailForm.controls.email.errors) {
        <mat-error>{{emailForm.controls.email.errors | validationError}}</mat-error>
        }
      </mat-form-field>

      <mat-card-actions>
        <button mat-button type="submit" [disabled]="!emailForm.enabled || !emailForm.valid || !emailForm.dirty">
          Update Email
        </button>
      </mat-card-actions>
    </form>
  </mat-card-content>
</mat-card>

<mat-divider class="divider"></mat-divider>

<!-- password change form -->
<mat-card class="form-card">
  <mat-card-header>
    <mat-card-title>
      Change Password
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>

    <app-password-reset [passwordForm]="passwordForm" (submit)="updatePassword()"></app-password-reset>

  </mat-card-content>
</mat-card>

<span style="flex-grow: 1;"></span>
}